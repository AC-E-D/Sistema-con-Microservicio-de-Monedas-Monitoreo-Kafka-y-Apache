<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Monedas Internacionales</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-4">

    <h2 class="mb-3">Valores de Monedas (API Internacional)</h2>
    <a class="btn btn-secondary mb-3" href="{% url 'productos' %}">Volver</a>

    <!-- FORMULARIO DE CONVERSIÃ“N -->
    <div class="card mb-4">
        <div class="card-body">
            <h5>Convertir Moneda</h5>

            <form method="get" class="row g-3">

                <div class="col-md-3">
                    <label>Monto</label>
                    <input type="number" step="any" class="form-control" name="monto"
                        value="{{ monto|default:'' }}" required>
                </div>

                <div class="col-md-3">
                    <label>Moneda Origen</label>
                    <select class="form-select" name="origen" required>
                        <option value="" disabled selected>Seleccione</option>
                        {% for moneda in rates.keys %}
                        <option value="{{ moneda }}" {% if origen == moneda %}selected{% endif %}>
                            {{ moneda }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-3">
                    <label>Moneda Destino</label>
                    <select class="form-select" name="destino" required>
                        <option value="" disabled selected>Seleccione</option>
                        {% for moneda in rates.keys %}
                        <option value="{{ moneda }}" {% if destino == moneda %}selected{% endif %}>
                            {{ moneda }}
                        </option>
                        {% endfor %}
                    </select>
                </div>

                <div class="col-md-3 d-flex align-items-end">
                    <button class="btn btn-primary w-100">Convertir</button>
                </div>

            </form>
        </div>
    </div>

    <!-- RESULTADO -->
    {% if conversion_result %}
    <div class="alert alert-success">
        {{ monto }} {{ origen }} = <strong>{{ conversion_result|floatformat:2 }}</strong> {{ destino }}
    </div>
    {% endif %}

    <!-- TABLA COMPLETA DE MONEDAS -->
    <h4 class="mb-3">Tasas de Cambio (base: {{ base }})</h4>

    <table class="table table-bordered table-sm">
        <thead>
            <tr>
                <th>Moneda</th>
                <th>Valor</th>
            </tr>
        </thead>
        <tbody>
            {% for moneda, valor in rates.items %}
            <tr>
                <td>{{ moneda }}</td>
                <td>{{ valor }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

</div>
</body>
</html>
